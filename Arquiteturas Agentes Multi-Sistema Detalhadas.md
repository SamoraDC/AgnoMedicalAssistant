O Clínico Colaborativo - Um Sistema de Assistente Médico Baseado em Agno
Este capítulo foca-se num sistema onde a baixa latência, a multimodalidade e a colaboração entre agentes especializados são cruciais. O Agno é escolhido pela sua natureza leve, suporte nativo a multimodalidade e funcionalidades explícitas para a construção de “equipas de agentes”.21 O uso exclusivo de inferência Groq é crítico para alcançar a responsividade em tempo real necessária num ambiente clínico.24

2.1. Arquitetura do Sistema para Análise Médica Multimodal
O design de alto nível do sistema prioriza a conformidade com HIPAA/LGPD e uma resposta de baixa latência, essenciais para a confiança e utilidade clínica.

Diagrama Arquitetónico: O sistema compreende um mecanismo de ingestão de dados seguro (upload compatível com HIPAA/LGPD), um backend FastAPI/Agno que orquestra os agentes, inferência em LPUs (Language Processing Units) da Groq, enriquecimento de dados via RAG a partir de uma base de dados vetorial (DuckDB) e a entrega segura de resultados a um frontend TypeScript/React.
Fluxo de Trabalho: Um médico faz o upload de um caso de paciente, que pode incluir resultados de exames laboratoriais digitalizados, relatórios em PDF e texto de histórico clínico. O backend FastAPI, protegido com OAuth2 e JWTs, recebe os dados e inicia uma equipa de agentes Agno. O agente “Triador” processa e encaminha o caso. Agentes especialistas analisam-no em paralelo, debatendo achados através do protocolo ACP. O relatório final, validado, é sintetizado e disponibilizado no dashboard, juntamente com um resumo em áudio para o paciente.
2.2. O Framework de Orquestração Agno
O Agno é posicionado como um framework orientado para o desempenho 22, ideal para aplicações onde muitos agentes especializados podem precisar de ser instanciados rapidamente. O seu suporte nativo para equipas multi-agente e multimodalidade 26 torna-o uma escolha forte para este complexo caso de uso médico.

Design de Agentes Hierárquico: A arquitetura implementa um padrão de “Mistura de Especialistas” (Mixture of Experts - MoE) no nível agêntico. Um único agente médico generalista seria propenso a alucinações e careceria de profundidade. A estrutura hierárquica mitiga este risco.
Triador (Agente de Triagem): O ponto de entrada. Realiza a análise inicial dos dados (incluindo OCR) e utiliza um modelo de classificação para determinar as especialidades médicas relevantes (e.g., “Cardiologia”, “Neurologia”, “Endocrinologia”). Em seguida, delega o caso aos agentes especialistas apropriados, agindo como o “router” num modelo MoE tradicional.
Especialistas (Agentes Especialistas): Um conjunto de agentes, cada um com um domínio específico (e.g., CardiologyAgent, EndocrinologyAgent). Cada agente está equipado com ferramentas e uma base de conhecimento dedicada (via RAG) para a sua especialidade. Analisam os dados do caso sob a sua perspetiva e geram uma hipótese preliminar com um score de confiança.
Validador (Agente Validador): Este agente desempenha um papel crucial de agregação e resolução de conflitos. Recebe as hipóteses de todos os agentes especialistas ativos. A sua função principal é identificar contradições (e.g., o agente de Cardiologia sugere uma medicação que é contraindicada pelos achados do agente de Neurologia).
Comunicador (Agente Comunicador): Recebe a síntese final e validada do Validador. O seu conjunto de ferramentas foca-se na geração de linguagem natural, traduzindo terminologia médica complexa para uma linguagem clara e acessível para o resumo do paciente e gerando o guião para o relatório em áudio.
Colaboração Estruturada via ACP:
Quando o agente Validador deteta um conflito, inicia um debate estruturado utilizando o Agent Communication Protocol (ACP).28 O ACP é escolhido pela sua natureza baseada em REST e agnóstica de framework, permitindo conversas padronizadas e auditáveis entre agentes.
Fluxo do Debate: O Validador envia uma mensagem via ACP aos Especialistas em conflito, apresentando a contradição. Os especialistas trocam então evidências das suas bases de conhecimento para resolver a discrepância. Esta é uma tarefa assíncrona e de longa duração, conforme definido pelo ACP.28 A resolução final é devolvida ao
Validador. A viabilidade deste debate interativo depende criticamente da baixa latência da inferência. Um debate com múltiplos turnos seria impraticavelmente lento com modelos em GPUs tradicionais. A latência extremamente baixa da Groq 24 permite que esta conversa entre agentes ocorra quase em tempo real, tornando possível um raciocínio colaborativo complexo.
2.3. Pipeline de Processamento Multimodal
OCR e Extração de Texto: O pipeline começa com o PyMuPDF, devido ao seu alto desempenho e suporte integrado ao Tesseract.30 A arquitetura inclui um mecanismo de fallback: se o score de qualidade do OCR do PyMuPDF para um determinado documento for baixo, o sistema reprocessará a imagem diretamente com o Tesseract, utilizando diferentes configurações de pré-processamento (e.g., binarização, remoção de ruído) para maximizar a precisão.31
Aumento de Conhecimento (RAG): Cada agente especialista terá um pipeline RAG dedicado. A base de conhecimento consistirá em artigos médicos, diretrizes clínicas e bases de dados de interações medicamentosas, armazenadas como embeddings no DuckDB.
Memória Semântica com DuckDB: O DuckDB é selecionado pelas suas capacidades analíticas de alto desempenho em processo, tornando-o ideal para um sistema autónomo. A extensão vss será utilizada para armazenar embeddings de casos clínicos anteriores anonimizados.32 Quando um novo caso chega, o agente
Triador pode realizar uma pesquisa de similaridade para encontrar casos históricos, fornecendo um contexto valioso (e.g., “Este caso é 85% semelhante ao Caso #1234, que resultou num diagnóstico de X”). Esta abordagem cria um sistema de memória de dois níveis que imita o raciocínio clínico: o RAG fornece o conhecimento explícito (“medicina baseada em evidências”), enquanto a pesquisa de similaridade de casos fornece o conhecimento experiencial (“raciocínio baseado em casos”).
Síntese de Relatório com Edge-TTS: O agente Comunicador utilizará o Edge-TTS, uma biblioteca de conversão de texto em fala de alta qualidade e de código aberto 34, para converter o resumo amigável para o paciente num ficheiro de áudio. Isto melhora a acessibilidade para os pacientes.
2.4. Segurança e Integração
A conformidade com os regulamentos de dados de saúde é um pilar arquitetónico não negociável.

Conformidade HIPAA/LGPD:
Autenticação: O backend FastAPI implementará OAuth2 com JWTs para uma autenticação de utilizador robusta e baseada em tokens.
Criptografia: Todos os dados serão criptografados em trânsito e em repouso.
GuardRails para PII/PHI: O GuardRails AI 17 será configurado com conjuntos de regras específicos para dados médicos. Um guardrail de entrada detetará e anonimizará automaticamente Informações de Saúde Protegidas (PHI) dos documentos carregados antes de serem processados pelos LLMs. Um guardrail de saída garantirá que nenhuma PHI seja acidentalmente incluída nos relatórios gerados. Rastos de auditoria registarão todos os acessos aos dados.
Escalonamento Contínuo com WebRTC:
Quando o sistema de agentes sinaliza um caso como altamente crítico ou não consegue resolver um conflito de diagnóstico, a interface do utilizador apresentará uma opção para iniciar uma teleconsulta. O WebRTC será integrado no frontend para estabelecer uma chamada de vídeo segura e ponto a ponto entre o médico e um especialista, diretamente na aplicação, garantindo uma transição suave do suporte de IA para a colaboração humana.
